<html>
    <head>
        <title> JS Fun </title>

        <script type="text/javascript" src="fun.js"></script>
        <script type="text/javascript" src="jml.js"></script>

        <script type="text/javascript">

            function run() {
                var elem = new Element();
                elem.setId("window");

                elem.setXAnimation(new NumberAnimation(function() {}, 200, 400))
                elem.setX(300);

                var elem2 = new Element();
                elem2.setId("window2");

                var anim = new NumberAnimation(function(y) { elem2.elem.style.left = y; }, 0, 100);
                anim.start();
                
                runJML();
            }
            
            function runJML() {
		var parser = new JMLParser();
		
		var jmlElements = document.getElementsByTagName("jml"); 
		
		if (jmlElements.length == 0)  {
			alert("could not find a jml tag");
			return;
		}
			
		parser.parse(jmlElements[0].firstChild.data);
		parser.dumpTokens();
		parser.compile(document.getElementById("myjmlroot"))
            }
            
            function changeJMLElement () {
		var elem = document.getElementById("redRect");
		elem.style.left = 500;
            }
            
       </script>

       
    </head>

    <body onload="JavaScript: run()">
    
       <jml style="visibility: hidden">

	Rectangle {
		id: "redRect";
		width: 30;
		height: 133;
		color: "red";
		x: 400;
		y: 30
	}
       
	Rectangle {
		id: "blueRect";
		width: 20;
		height: 30;
		color: "blue";
	}
	
       </jml>
       
       <jmlobject id="myjmlroot">
       </jmlobject>
       
        <div id="window" style="left: 200; top: 100; position: absolute; width: 100; height: 100;
            background-color: #00ff00;">
        </div>
        
        <div id="window2" style="left: 0; top: 0; position: absolute; width: 50; height: 50; background-color: #ff0000;">
        </div>
        
        <a href="JavaScript: changeJMLElement();">JML</a>
    </body>
</html>

