<html>
	<head>
		<title> JS Fun </title>

		<script type="text/javascript" src="animation.js"></script>
		<script type="text/javascript" src="jml.js"></script>

		<script type="text/javascript">

		function run() {
			var anim = new NumberAnimation(jml.getElementById("myImage"), "x", 0, 1000, 4000);
			anim.start();
		}
		
		function changeJMLElement () {
			var elem = jml.getElementById("greenRect");
			elem.y = document.getElementById("myValue").value;
		}
		
		function animateOpacity () {
			var anim = new NumberAnimation(jml.getElementById("myImage"), "opacity", jml.getElementById("myImage").opacity, document.getElementById("myOpacity").value, 2000);
			anim.start();
		}
		
		function compileTextArea() {
			jml.clear();
			
			jml.parse(document.getElementById("jml").value);
// 			jml.dumpTokens();
			jml.compile(document.getElementById("textareajmlroot"))
		}

		function executeFunction() {
			jml.getElementById("myImage2").foobar("Test String");
		}
		
	</script>

	</head>
	<body>
	
	<textarea id="jml" rows=20 cols=80>
Rectangle {
	id: greenRect;
	width: 20;
	height: 30;
	color: "green";
	x: 0;
	y: 50;
	customProperty: 800;
	opacity: myImage.opacity;
	onclick: "alert('click')";
}

Image {
	id: myImage;
	width: 64;
	height: 64;
	source: "icon" + ".png";
	x: greenRect.customProperty*1.2;
	y: greenRect.y - 50;
}

Image {
	id: myImage2;
	width: 64;
	height: 64;
	source: "icon" + ".png";
	x: myImage.x * 1.3;
	y: myImage.y + 100;
	
	Rectangle {
		id: blueRect;
		width: 20;
		height: 20;
		color: "blue";
		x: -100;
		y: 10;
		
		Rectangle {
			id: redRect;
			width: 10;
			height: 10;
			color: "red";
			x: blueRect.width/4.0;
			y: blueRect.height/4.0;
		}
	}
	
	function foobar(param) { alert(param + ": " + this.id + " width=" + this.width); }
}
	</textarea>
	<br/>
	<a href="JavaScript: compileTextArea();">Compile</a><br/>
	<input type="text" id="myValue" value="100"/><a href="JavaScript: changeJMLElement();">Change y of greenRect</a><br/>
	<input type="text" id="myOpacity" value="0"/><a href="JavaScript: animateOpacity();">Animate opacity of myImage</a><br/>
	<a href="JavaScript: run();">start Animation</a><br/>
	<a href="JavaScript: executeFunction();">execute the function foobar("Test String") on myImage2</a><br/>
	
	<jmlobject id="textareajmlroot">
	</jmlobject>
	
<!--		<div id="window" style="left: 200; top: 100; position: absolute; width: 100; height: 100;
		background-color: #00ff00;">
		</div>
		
		<div id="window2" style="left: 0; top: 0; position: absolute; width: 50; height: 50; background-color: #ff0000;">
		</div>-->
		
	
<!--	<jml style="visibility: hidden">

		Rectangle {
			id: redRect;
			width: 10;
			height: 10;
			color: "red";
			x: 400;
			y: 30;
		}
	</jml>
	
	<jmlobject id="myjmlroot">
	</jmlobject>-->

		
	</body>
</html>

